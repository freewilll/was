#include "instr.h"
#include "opcodes.h"

// Generated by {{generator}}

Opcode opcodes[] = {
{%- for opcode in opcodes %}
    {
        "{{opcode.mnem}}",
        0x{{opcode.prefix}},
        0x{{opcode.value}},
        {{opcode.opcd_ext}},
        {{opcode.needs_mod_rm}},
        {
            {{-"'"+opcode.dst.am.value+"'" if opcode.dst.am.value else 0}},
            {{-opcode.dst.sizes}},
            {{-opcode.dst.uses_operand_size}},
            {{-opcode.dst.can_be_imm64}},
            {{-opcode.dst.sign_extended}},
            {{-opcode.dst.word_or_double_word_operand}},
            {{-'"'+opcode.dst.type.value+'"' if opcode.dst.type.value else 0}}},
        {
            {{-"'"+opcode.src.am.value+"'" if opcode.src.am.value else 0}},
            {{-opcode.src.sizes}},
            {{-opcode.src.uses_operand_size}},
            {{-opcode.src.can_be_imm64}},
            {{-opcode.src.sign_extended}},
            {{-opcode.src.word_or_double_word_operand}},
            {{-'"'+opcode.src.type.value+'"' if opcode.src.type.value else 0}}},
        {{opcode.op_size}},
        {{opcode.direction}},
        {{opcode.acc}},
        {{opcode.branch}},
        {{opcode.conver}}
    },
{%- endfor %}
};

OpcodeAlias opcode_aliases[] = {
{%- for opcode_alias, wcc_opcode in opcode_aliases.items() %}
    { "{{opcode_alias}}", "{{wcc_opcode.mnem}}", {{wcc_opcode.size.value if wcc_opcode.size else 0}} },
{%- endfor %}
};

int opcode_count = sizeof(opcodes) / sizeof(Opcode);
int opcode_aliases_count = sizeof(opcode_aliases) / sizeof(OpcodeAlias);
